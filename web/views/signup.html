<div class="col-12 login-main" id="signup-box">
    <form class="needs-validation" action="/signup" method="post">
        <div class="form-group row">
            <label for="inputEmail3" class="col-sm-2 col-form-label">用户名</label>
            <div class="col-sm-10">
                <input type="text" name="username" class="form-control" placeholder="用户名" required>
                <div class="valid-feedback">√</div>
                <div class="invalid-feedback">请输入用户名</div>
            </div>
        </div>
        <div class="form-group row">
            <label for="inputPassword3" class="col-sm-2 col-form-label">密码</label>
            <div class="col-sm-10">
                <input type="password" name="password" class="form-control" placeholder="*******" required>
                <div class="valid-feedback">√</div>
                <div class="invalid-feedback">请输入密码</div>
            </div>
        </div>
        <div class="form-group row">
            <label for="inputPassword3" class="col-sm-2 col-form-label">邮箱</label>
            <div class="col-sm-10">
                <input type="email" name="email" class="form-control" placeholder="email" required>
                <div class="valid-feedback">√</div>
                <div class="invalid-feedback">请输入您的邮箱</div>
            </div>
        </div>
        <div class="form-group row">
            <div class="col-sm-10 " style="text-align: center;">
                <div id="submitBtn" data-url="/signup" class="btn btn-secondary">注册</div>
            </div>
        </div>
    </form>
</div>

<script>
    window.onload = function () {
        document.getElementById('submitBtn').addEventListener('click', function (event) {
            event.preventDefault();
            AJAX.post(this, 'signup-box', function success(result) {
                if (!result.data.success) return alert(result.data.message);
                // MESSAGE.successTitleAndContent('注册成功', "亲爱的用户，你已经注册成功了", "/login");
                setTimeout(function () {
                    window.location.href = result.data.return_url || "/login";
                }, 3000);
            }, function error(err) {
                alert('网络错误');
                console.error(err);
            })
        })
    }
    // $('#submitBtn').on('click', function (event) {
    //     event.preventDefault();
    //     // alert(1)
    //     AJAX.post(this, '#signup-box', function success(data) {
    //         if (!data.success) return MESSAGE.error(data.message);
    //         MESSAGE.successTitleAndContent('注册成功', "亲爱的用户，你已经注册成功了", "/login");
    //         setTimeout(function () {
    //             window.location.href = data.return_url || "/login";
    //         }, 3000);
    //     }, function error(err) {
    //         MESSAGE.error('网络错误');
    //         console.error(err);
    //     });
    // })
</script>
