<div class="col-12 login-main">
    <form class="needs-validation" id="login-box">
        <div class="form-group row">
            <label for="inputEmail3" class="col-sm-2 col-form-label">用户名</label>
            <div class="col-sm-10">
                <input type="text" name="username" class="form-control" placeholder="用户名" required autofocus>
                <div class="valid-feedback">√</div>
                <div class="invalid-feedback">请输入用户名</div>
            </div>
        </div>
        <div class="form-group row">
            <label for="inputPassword3" class="col-sm-2 col-form-label">密码</label>
            <div class="col-sm-10">
                <input type="password" name="password" class="form-control" placeholder="密码" required autofocus>
                <div class="valid-feedback">√</div>
                <div class="invalid-feedback">请输入密码</div>
            </div>
        </div>
        <div class="form-group row">
            <div class="col-sm-10 " style="text-align: center;">
                <button data-url="/login" id="submitBtn" class="btn btn-secondary">登录</button>
            </div>
        </div>
    </form>
</div>

<script>
$('#submitBtn').on('click', function (event) {
    event.preventDefault();
    AJAX.post(this, '#login-box', function (data) {
        if (!data.success) return MESSAGE.error(data.message);
        MESSAGE.successTitleAndContent('登录成功', "登录成功", "/");
        setTimeout(function () {
            window.location.href = data.return_url || "/login";
        }, 3000);
    }, function (err) {
        MESSAGE.error('网络错误')
        console.log(err);
    });
})
</script>
